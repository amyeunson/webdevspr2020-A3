(this.webpackJsonpwebdevspr2020_a3=this.webpackJsonpwebdevspr2020_a3||[]).push([[0],{41:function(e,t,n){e.exports=n(77)},47:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(15),u=n.n(o),l=(n(46),n(47),n(11)),c=n(17),s=n(8),i=n(9),E=n(12),h=n(10),f=n(16),m=n(13),d=n(81),p=n(86),R=n(87),b=n(80),O=n(92),L=n(78),k=n(79),g=n(18),A=n.n(g);function y(){return function(e){return A.a.get("/api/books/").then((function(t){return e(S(t.data))}),(function(t){return e(T(t))}))}}var v=function(e){return{type:"RECEIVE SEARCH RESULTS",payload:e}},S=function(e){return{type:"RECEIVE MY BOOKS",myBookLists:e}},C=function(){return{type:"HANDLE SUCCESS"}},j=function(){return{type:"HANDLE ADD TWICE ERROR"}},D=function(){return{type:"HANDLE UPDATE ERROR"}},I=function(){return{type:"HANDLE DELETE ERROR"}},T=function(){return{type:"HANDLE GET LISTS ERROR"}},N=function(){return{type:"HANDLE API ERROR"}},U=function(){return{type:"HANDLE SEARCH DISPLAY ERROR"}};var w={queryResult:[]},F={toRead:[],haveRead:[]},H="UI FLAG FAILED TO RETRIEVE LISTS",G={flag:"UI FLAG SUCCESS",message:""},B=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(E.a)(this,Object(h.a)(t).call(this,e))).state={modalOpen:!1,message:""},n.toggle=n.toggle.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(){this.setState({modalOpen:!this.state.modalOpen}),this.props.uiErrorReset()}},{key:"setMessage",value:function(){switch(this.props.flag){case"UI FLAG API ERROR":return"Could not fetch search results";case"UI FLAG DISPLAY ERROR":return"Could not display search results";case H:return"Could not retrieve your lists";case"UI FLAG UPDATE ERROR":return"Could not update the book list placement";case"UI FLAG DELETE ERROR":return"Could not delete book";case"UI FLAG ADD BOOK TWICE ERROR":return"Error: You can not add the same book twice";default:return""}}},{key:"checkError",value:function(){return"UI FLAG RESOLVED"!==this.props.flag&&"UI FLAG SUCCESS"!==this.props.flag}},{key:"render",value:function(){return r.a.createElement(O.a,{isOpen:this.checkError(),toggle:this.toggle},r.a.createElement(L.a,null,r.a.createElement("h5",null,this.setMessage())),r.a.createElement(k.a,null,r.a.createElement(b.a,{onClick:this.toggle},"Exit")))}}]),t}(a.Component),P=Object(l.b)((function(e,t){return{flag:e.userFeedback.flag}}),{uiErrorReset:function(){return{type:"RESET ERROR"}}})(B),V=n(20),M=n(83),Y=n(84),z=n(85),K=n(88),q=n(89),W=n(90),x=n(91),J=n(82),_=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).addAndDelete=function(e){n.props.add(n.props.book,e),n.props.delete(n.props.book)},n.formattedAuthors=function(e){var t="";if(0===e.length)t+="No Author Listed";else if(t+="By: ",1===e.length)t+=e[0];else{for(var n=0;n<e.length-1;n+=1)t+=e[n]+", ";t+=e[e.length-1]}return t},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement(J.a,null,this.formattedAuthors(this.props.book.authors)),r.a.createElement(b.a,{outline:!0,color:"primary",className:"mb-3",size:"sm",onClick:function(){return e.addAndDelete("toRead")}},"Mark As Not Read"),r.a.createElement(b.a,{outline:!0,color:"primary",className:"mb-3",size:"sm",onClick:function(){return e.addAndDelete("haveRead")}},"Mark As Read"))}}]),t}(a.Component),Q=Object(l.b)((function(e,t){return{}}),(function(e,t){return{add:function(t,n){return e(function(e,t){return function(n){return A.a.post("/api/books/",{title:e.title,authors:e.authors,id:e.id,markType:t}).then((function(e){return n(C(e))}),(function(e){return n(j(e))}))}}(t,n))},delete:function(t){return e(function(e){return{type:"DELETE SEARCH BOOK",bookInfo:e}}(t))}}}))(_),X=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(E.a)(this,Object(h.a)(t).call(this,e))).state={search:""},n.onFieldChange=n.onFieldChange.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onFieldChange",value:function(e){this.setState(Object(V.a)({},e.target.id,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(M.a,{inline:!0},r.a.createElement(Y.a,null,r.a.createElement(z.a,{type:"text",id:"search",value:this.state.search,onChange:this.onFieldChange}),r.a.createElement(b.a,{className:"custom-blue mb-3",onClick:function(){return e.props.searchBooks(e.state.search)}},"Search"))),r.a.createElement(p.a,null,r.a.createElement(R.a,null,r.a.createElement(K.a,null,r.a.createElement(q.a,null,r.a.createElement("h5",null,"Results")),r.a.createElement(W.a,null,this.renderSearchList())))))}},{key:"renderSearchList",value:function(){return this.props.searchList&&this.props.searchList.length>0?this.props.searchList.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(x.a,null,e.title),r.a.createElement(Q,{book:e}))})):null}}]),t}(a.Component);var Z=Object(l.b)((function(e,t){return{searchList:e.search.queryResult}}),(function(e,t){return{searchBooks:function(t){return e(function(e){var t=function(e){return e.replace(/ /g,"+")}(e);return function(e){return A.a.get("https://www.googleapis.com/books/v1/volumes?q="+t+"&key=AIzaSyBLYjz1fjuKIPoyDeLyW4VNRUbzoHf6LlI").then((function(e){return e.data.items.map((function(e){return{title:e.volumeInfo.title,authors:e.volumeInfo.authors,id:e.id}}))}),(function(t){return e(N(t))})).then((function(t){return e(v(t))}),(function(t){return e(U(t))}))}}(t))}}}))(X),$=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).formattedAuthors=function(e){var t="";if(0===e.length)t+="No Author Listed";else if(t+="By: ",1===e.length)t+=e[0];else{for(var n=0;n<e.length-1;n+=1)t+=e[n]+", ";t+=e[e.length-1]}return t},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement(J.a,null,this.formattedAuthors(this.props.book.authors)),r.a.createElement(b.a,{outline:!0,color:"primary",className:"mb-3",size:"sm",onClick:function(){e.props.update(e.props.book,e.props.markType)}},this.props.markTypeTitle," "),r.a.createElement(b.a,{outline:!0,color:"danger",className:"mb-3",size:"sm",onClick:function(){e.props.delete(e.props.book,e.props.markType)}},"Delete"))}}]),t}(a.Component),ee=Object(l.b)((function(e,t){return{}}),(function(e,t){return{update:function(t,n){return e(function(e,t){return function(n){return A.a.put("/api/books/"+e.id,{title:e.title,authors:e.authors,id:e.id,markType:t}).then((function(e){return n(C(e))}),(function(e){return n(D(e))})).then(n(y()))}}(t,n))},delete:function(t,n){return e(function(e,t){return function(n){return A.a.delete("/api/books/"+e.id,{title:e.title,authors:e.authors,id:e.id,markType:t}).then((function(e){return n(C(e))}),(function(e){return n(I(e))})).then(n(y()))}}(t,n))}}}))($),te=function(e){function t(){return Object(s.a)(this,t),Object(E.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement(p.a,null,r.a.createElement(R.a,null,r.a.createElement(K.a,null,r.a.createElement(q.a,null,r.a.createElement("h5",null,"To Read")),r.a.createElement(W.a,null,this.props.toReadList.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(x.a,null,e.title),r.a.createElement(ee,{className:"mt-2",book:e,markTypeTitle:"Mark As Read",markType:"haveRead"}))}))))),r.a.createElement(R.a,null,r.a.createElement(K.a,null,r.a.createElement(q.a,null,r.a.createElement("h5",null,"Have Read")),r.a.createElement(W.a,null,this.props.haveReadList.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(x.a,null,e.title),r.a.createElement(ee,{book:e,markTypeTitle:"Mark As Not Read",markType:"toRead"}))}))))))))}}]),t}(a.Component);var ne=Object(l.b)((function(e,t){return{toReadList:e.bookLists.toRead,haveReadList:e.bookLists.haveRead}}),(function(e,t){return{onMount:function(){e(y())}}}))(te),ae=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(E.a)(this,Object(h.a)(t).call(this,e))).state={showLists:!1},n.toggleView=n.toggleView.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"toggleView",value:function(){this.setState({showLists:!this.state.showLists})}},{key:"render",value:function(){return r.a.createElement(d.a,{className:"container"},r.a.createElement("h1",null,"BookList App"),r.a.createElement(P,null),r.a.createElement(p.a,null,r.a.createElement(R.a,{className:"col-12 col-md-2 mt-4"},this.state.showLists?r.a.createElement(b.a,{className:"custom-blue",onClick:this.toggleView},"Back to Search"):r.a.createElement(b.a,{className:"custom-blue",onClick:this.toggleView},"My Lists")),r.a.createElement(R.a,{className:"col-12 col-md-8 offset-md-2 mt-4"},this.state.showLists?r.a.createElement(ne,null):r.a.createElement(Z,null))))}}]),t}(a.Component),re=n(39);var oe=Object(c.c)({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE SEARCH RESULTS":return Object(re.a)({},e,{queryResult:t.payload});case"DELETE SEARCH BOOK":return Object.assign({},e,{queryResult:e.queryResult.filter((function(e){return e.id!==t.bookInfo.id}))});default:return e}},bookLists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE MY BOOKS":return Object.assign({},e,{toRead:t.myBookLists.toRead,haveRead:t.myBookLists.haveRead});default:return e}},userFeedback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HANDLE SUCCESS":return{flag:"UI FLAG SUCCESS"};case"HANDLE API ERROR":return{flag:"UI FLAG API ERROR"};case"HANDLE SEARCH DISPLAY ERROR":return{flag:"UI FLAG DISPLAY ERROR"};case"HANDLE GET LISTS ERROR":return{flag:H};case"HANDLE UPDATE ERROR":return{flag:"UI FLAG UPDATE ERROR"};case"HANDLE ADD TWICE ERROR":return{flag:"UI FLAG ADD BOOK TWICE ERROR"};case"HANDLE DELETE ERROR":return{flag:"UI FLAG DELETE ERROR"};case"RESET ERROR":return{flag:"UI FLAG RESOLVED"};default:return e}}}),ue=n(40),le=Object(c.d)(oe,Object(c.a)(ue.a)),ce=document.getElementById("root");u.a.render(r.a.createElement(l.a,{store:le},r.a.createElement(ae,null)),ce)}},[[41,1,2]]]);
//# sourceMappingURL=main.9acb2be4.chunk.js.map
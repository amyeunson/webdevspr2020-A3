(this.webpackJsonpwebdevspr2020_a3=this.webpackJsonpwebdevspr2020_a3||[]).push([[0],{41:function(e,t,n){e.exports=n(77)},47:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(15),u=n.n(o),c=(n(46),n(47),n(11)),s=n(17),l=n(8),i=n(9),E=n(12),h=n(10),m=n(16),p=n(13),R=n(81),d=n(86),f=n(87),b=n(80),O=n(92),k=n(78),L=n(79),g=n(18),y=n.n(g);function A(){return function(e){return y.a.get("/api/books/").then((function(t){return e(C(t.data))}),(function(t){return e(T(t))}))}}var v=function(e){return{type:"RECEIVE SEARCH RESULTS",payload:e}},C=function(e){return{type:"RECEIVE MY BOOKS",myBookLists:e}},S=function(){return{type:"HANDLE SUCCESS"}},j=function(){return{type:"HANDLE ADD TWICE ERROR"}},D=function(){return{type:"HANDLE UPDATE ERROR"}},I=function(){return{type:"HANDLE DELETE ERROR"}},T=function(){return{type:"HANDLE GET LISTS ERROR"}},N=function(){return{type:"HANDLE API ERROR"}},U=function(){return{type:"HANDLE SEARCH DISPLAY ERROR"}};var w={queryResult:[]},F={toRead:[],haveRead:[]},H="UI FLAG FAILED TO RETRIEVE LISTS",G={flag:"UI FLAG SUCCESS",message:""},B=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(E.a)(this,Object(h.a)(t).call(this,e))).state={modalOpen:!1,message:""},n.toggle=n.toggle.bind(Object(m.a)(n)),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(){this.setState({modalOpen:!this.state.modalOpen}),this.props.uiErrorReset()}},{key:"setMessage",value:function(){switch(this.props.flag){case"UI FLAG API ERROR":return"Could not fetch search results";case"UI FLAG DISPLAY ERROR":return"Could not display search results";case H:return"Could not retrieve your lists";case"UI FLAG UPDATE ERROR":return"Could not update the book list placement";case"UI FLAG DELETE ERROR":return"Could not delete book";case"UI FLAG ADD BOOK TWICE ERROR":return"You can not add the same book twice";default:return""}}},{key:"checkError",value:function(){return"UI FLAG RESOLVED"!==this.props.flag&&"UI FLAG SUCCESS"!==this.props.flag}},{key:"render",value:function(){return r.a.createElement(O.a,{isOpen:this.checkError(),toggle:this.toggle},r.a.createElement(k.a,null,"Error: ",this.setMessage()),r.a.createElement(L.a,null,r.a.createElement(b.a,{onClick:this.toggle},"OK")))}}]),t}(a.Component),P=Object(c.b)((function(e,t){return{flag:e.userFeedback.flag}}),{uiErrorReset:function(){return{type:"RESET ERROR"}}})(B),M=n(20),V=n(83),Y=n(84),q=n(85),K=n(88),z=n(89),W=n(90),J=n(91),x=n(82),_=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).addAndDelete=function(e){n.props.add(n.props.book,e),n.props.delete(n.props.book)},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(R.a,null,r.a.createElement(x.a,null,this.props.book.authors),r.a.createElement(b.a,{outline:!0,color:"primary",className:"mb-3",size:"sm",onClick:function(){return e.addAndDelete("toRead")}},"Mark As Not Read"),r.a.createElement(b.a,{outline:!0,color:"primary",className:"mb-3",size:"sm",onClick:function(){return e.addAndDelete("haveRead")}},"Mark As Read"))}}]),t}(a.Component),Z=Object(c.b)((function(e,t){return{}}),(function(e,t){return{add:function(t,n){return e(function(e,t){return function(n){return y.a.post("/api/books/",{title:e.title,authors:e.authors,id:e.id,markType:t}).then((function(e){return n(S(e))}),(function(e){return n(j(e))}))}}(t,n))},delete:function(t){return e(function(e){return{type:"DELETE SEARCH BOOK",bookInfo:e}}(t))}}}))(_),Q=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(E.a)(this,Object(h.a)(t).call(this,e))).state={search:""},n.onFieldChange=n.onFieldChange.bind(Object(m.a)(n)),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"onFieldChange",value:function(e){this.setState(Object(M.a)({},e.target.id,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(V.a,{inline:!0},r.a.createElement(Y.a,null,r.a.createElement(q.a,{type:"text",id:"search",value:this.state.search,onChange:this.onFieldChange}),r.a.createElement(b.a,{className:"custom-blue mb-3",onClick:function(){return e.props.searchBooks(e.state.search)}},"Search"))),r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(K.a,null,r.a.createElement(z.a,null,"Results"),r.a.createElement(W.a,null,this.renderSearchList())))))}},{key:"renderSearchList",value:function(){return this.props.searchList&&this.props.searchList.length>0?this.props.searchList.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(J.a,null,e.title),r.a.createElement(Z,{book:e}))})):null}}]),t}(a.Component);var X=Object(c.b)((function(e,t){return{searchList:e.search.queryResult}}),(function(e,t){return{searchBooks:function(t){return e(function(e){var t=function(e){return e.replace(/ /g,"+")}(e);return function(e){return y.a.get("https://www.googleapis.com/books/v1/volumes?q="+t+"&key=AIzaSyCzmPJwOqDFnGys2ZYBgbF-HqwW3BLirBY").then((function(e){return e.data.items.map((function(e){return{title:e.volumeInfo.title,authors:e.volumeInfo.authors,id:e.id}}))}),(function(t){return e(N(t))})).then((function(t){return e(v(t))}),(function(t){return e(U(t))}))}}(t))}}}))(Q),$=function(e){function t(){return Object(l.a)(this,t),Object(E.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(R.a,null,r.a.createElement(x.a,null,this.props.book.authors),r.a.createElement(b.a,{outline:!0,color:"primary",className:"mb-3",size:"sm",onClick:function(){e.props.update(e.props.book,e.props.markType)}},this.props.markTypeTitle," "),r.a.createElement(b.a,{outline:!0,color:"danger",className:"mb-3",size:"sm",onClick:function(){e.props.delete(e.props.book,e.props.markType)}},"Delete"))}}]),t}(a.Component),ee=Object(c.b)((function(e,t){return{}}),(function(e,t){return{update:function(t,n){return e(function(e,t){return function(n){return y.a.put("/api/books/"+e.id,{title:e.title,authors:e.authors,id:e.id,markType:t}).then((function(e){return n(S(e))}),(function(e){return n(D(e))})).then(n(A()))}}(t,n))},delete:function(t,n){return e(function(e,t){return function(n){return y.a.delete("/api/books/"+e.id,{title:e.title,authors:e.authors,id:e.id,markType:t}).then((function(e){return n(S(e))}),(function(e){return n(I(e))})).then(n(A()))}}(t,n))}}}))($),te=function(e){function t(){return Object(l.a)(this,t),Object(E.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(R.a,null,r.a.createElement(d.a,null,r.a.createElement(K.a,null,r.a.createElement(z.a,null,"To Read List"),r.a.createElement(W.a,null,this.props.toReadList.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(J.a,null,e.title),r.a.createElement(ee,{className:"mt-2",book:e,markTypeTitle:"Mark As Read",markType:"haveRead"}))})))),r.a.createElement(K.a,null,r.a.createElement(z.a,null,"Have Read List"),r.a.createElement(W.a,null,this.props.haveReadList.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(J.a,null,e.title),r.a.createElement(ee,{book:e,markTypeTitle:"Mark As Not Read",markType:"toRead"}))})))))))}}]),t}(a.Component);var ne=Object(c.b)((function(e,t){return{toReadList:e.bookLists.toRead,haveReadList:e.bookLists.haveRead}}),(function(e,t){return{onMount:function(){e(A())}}}))(te),ae=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(E.a)(this,Object(h.a)(t).call(this,e))).state={showLists:!1},n.toggleView=n.toggleView.bind(Object(m.a)(n)),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"toggleView",value:function(){this.setState({showLists:!this.state.showLists})}},{key:"render",value:function(){return r.a.createElement(R.a,{className:"container"},r.a.createElement(P,null),r.a.createElement(d.a,null,r.a.createElement(f.a,{className:"col-12 col-md-2 mt-4"},this.state.showLists?r.a.createElement(b.a,{className:"custom-blue",onClick:this.toggleView},"Back to Search"):r.a.createElement(b.a,{className:"custom-blue",onClick:this.toggleView},"My Lists")),r.a.createElement(f.a,{className:"col-12 col-md-8 offset-md-2 mt-4"},this.state.showLists?r.a.createElement(ne,null):r.a.createElement(X,null))))}}]),t}(a.Component),re=n(39);var oe=Object(s.c)({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE SEARCH RESULTS":return Object(re.a)({},e,{queryResult:t.payload});case"DELETE SEARCH BOOK":return Object.assign({},e,{queryResult:e.queryResult.filter((function(e){return e.id!==t.bookInfo.id}))});default:return e}},bookLists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE MY BOOKS":return Object.assign({},e,{toRead:t.myBookLists.toRead,haveRead:t.myBookLists.haveRead});default:return e}},userFeedback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HANDLE SUCCESS":return{flag:"UI FLAG SUCCESS"};case"HANDLE API ERROR":return{flag:"UI FLAG API ERROR"};case"HANDLE SEARCH DISPLAY ERROR":return{flag:"UI FLAG DISPLAY ERROR"};case"HANDLE GET LISTS ERROR":return{flag:H};case"HANDLE UPDATE ERROR":return{flag:"UI FLAG UPDATE ERROR"};case"HANDLE ADD TWICE ERROR":return{flag:"UI FLAG ADD BOOK TWICE ERROR"};case"HANDLE DELETE ERROR":return{flag:"UI FLAG DELETE ERROR"};case"RESET ERROR":return{flag:"UI FLAG RESOLVED"};default:return e}}}),ue=n(40),ce=Object(s.d)(oe,Object(s.a)(ue.a)),se=document.getElementById("root");u.a.render(r.a.createElement(c.a,{store:ce},r.a.createElement(ae,null)),se)}},[[41,1,2]]]);
//# sourceMappingURL=main.1cdf50c7.chunk.js.map